<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>使用 Invox Setup 实现 Electron 安装包界面美化 | Sanonz</title><meta name="author" content="Sanonz"><meta name="keywords" content="Sanonz、Web、WebGL、Font End、Developer、Mini Program"><meta name="description" content="介绍项目介绍Electron Invox 是基于 Invox Setup 的 Electron 安装界面美化，支持一键打包 Electron 应用，使用 DuiLib UI + C++ 实现，安装包体积仅 2MB+，无需额外依赖，内置 Analytics 支持，可追踪安装/卸载行为，采用类 HTML 的 XML 布局方式，易于定制，支持中英文等多语言切换。下载安装包体验：InvoxSetup-1.0.0.exe项目原理本安装程序采用模块化设计，各组件职责明确：UI 层：基于 DuiLib 框架构"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><link rel="alternate" href="/atom.xml" title="Sanonz" type="application/atom+xml"><link rel="icon" href="/images/favicon.ico"><style type="text/css">@font-face{font-family:icomoon;src:url(/fonts/icomoon.eot?q628ml);src:url(/fonts/icomoon.eot?q628ml#iefix) format('embedded-opentype'),url(/fonts/icomoon.ttf?q628ml) format('truetype'),url(/fonts/icomoon.woff?q628ml) format('woff'),url(/fonts/icomoon.svg?q628ml#icomoon) format('svg');font-weight:400;font-style:normal}</style><link rel="stylesheet" href="/css/style.css"><!--[if lt IE 9]><style type="text/css">.nav-inner {top:0;}.author-meta {position:static;top:0;}.search-form {height:36px;}</style><script type="text/javascript" src="https://unpkg.com/html5shiv@3.7.3/dist/html5shiv.min.js"></script><![endif]--><meta name="generator" content="Hexo 4.2.1"></head><body><main class="app"><header id="header" class="header clearfix"><div id="nav" class="nav"><div class="nav-mobile"><button id="open-panel" class="open-panel nav-mobile-item"><i class="icon-documents"></i></button><h1 class="nav-mobile-title nav-mobile-item">Sanonz</h1><button id="open-menus" class="open-panel nav-mobile-item"><i class="icon-library"></i></button></div><nav id="nav-inner" class="nav-inner"><a class="nav-item" href="/"><span class="nav-text">首页</span> </a><a class="nav-item" href="/categories/front-end"><span class="nav-text">前端</span> </a><a class="nav-item" href="/categories/back-end"><span class="nav-text">后端</span> </a><a class="nav-item" href="/tags"><span class="nav-text">标签</span> </a><a class="nav-item" href="/archives"><span class="nav-text">归档</span> </a><a class="nav-item" href="/atom.xml"><span class="nav-text">订阅</span> </a><a class="nav-item" href="/about"><span class="nav-text">关于</span></a></nav></div><aside id="aside" class="aside"><div id="aside-mask" class="aside-mask"></div><div id="aside-inner" class="aside-inner"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"><i class="icon-search-stroke"></i></button><input type="hidden" name="sitesearch" value="https://sanonz.github.io"></form><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#介绍"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#项目介绍"><span class="toc-number">1.1.</span> <span class="toc-text">项目介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#项目原理"><span class="toc-number">1.2.</span> <span class="toc-text">项目原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#界面预览"><span class="toc-number">1.3.</span> <span class="toc-text">界面预览</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用说明"><span class="toc-number">2.</span> <span class="toc-text">使用说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装-Visual-Studio-2022-构建环境"><span class="toc-number">2.1.</span> <span class="toc-text">安装 Visual Studio 2022 构建环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#运行-Electron-示例模版"><span class="toc-number">2.2.</span> <span class="toc-text">运行 Electron 示例模版</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#下载源码"><span class="toc-number">2.2.1.</span> <span class="toc-text">下载源码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装依赖"><span class="toc-number">2.2.2.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#构建应用"><span class="toc-number">2.2.3.</span> <span class="toc-text">构建应用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在已有-Electron-项目中添加"><span class="toc-number">2.3.</span> <span class="toc-text">在已有 Electron 项目中添加</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#添加-Invox-Setup-为子仓库"><span class="toc-number">2.3.1.</span> <span class="toc-text">添加 Invox Setup 为子仓库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#导入构建脚本到项目"><span class="toc-number">2.3.2.</span> <span class="toc-text">导入构建脚本到项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#运行命令构建"><span class="toc-number">2.3.3.</span> <span class="toc-text">运行命令构建</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置说明"><span class="toc-number">3.</span> <span class="toc-text">配置说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置-Config-h"><span class="toc-number">3.1.</span> <span class="toc-text">配置 Config.h</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#应用程序配置"><span class="toc-number">3.1.1.</span> <span class="toc-text">应用程序配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#版权信息"><span class="toc-number">3.1.2.</span> <span class="toc-text">版权信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#网络端点"><span class="toc-number">3.1.3.</span> <span class="toc-text">网络端点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#压缩率配置"><span class="toc-number">3.2.</span> <span class="toc-text">压缩率配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#压缩率列表"><span class="toc-number">3.2.1.</span> <span class="toc-text">压缩率列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#默认压缩率"><span class="toc-number">3.2.2.</span> <span class="toc-text">默认压缩率</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UI-界面排版"><span class="toc-number">3.3.</span> <span class="toc-text">UI 界面排版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注意事项"><span class="toc-number">3.4.</span> <span class="toc-text">注意事项</span></a></li></ol></li></ol></div></aside></header><div id="content" class="content"><div id="wrapper" class="wrapper"><article class="article" itemscope itemprop="blogPost"><header class="article-header"><h1 itemprop="name">使用 Invox Setup 实现 Electron 安装包界面美化</h1><div class="article-meta clearfix"><a class="article-date" href="https://sanonz.github.io/2025/beautifying-electron-installer-ui-with-invox-setup/index.html"><i class="icon-calendar vm"></i> <time class="vm" datetime="2025-10-15T12:21:00.000Z" itemprop="datePublished">2025-10-15</time></a><div class="article-tag-list"><i class="icon-tag vm"></i> <a class="article-tag-link" href="/tags/c/" rel="tag">c</a>, <a class="article-tag-link" href="/tags/c/" rel="tag">c++</a>, <a class="article-tag-link" href="/tags/electron/" rel="tag">electron</a></div></div></header><section class="article-body markdown-body"><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><h3 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h3><p><a href="https://github.com/sanonz/electron-invox" target="_blank" rel="noopener">Electron Invox</a> 是基于 <a href="https://github.com/sanonz/invox-setup" target="_blank" rel="noopener">Invox Setup</a> 的 Electron 安装界面美化，支持一键打包 Electron 应用，使用 DuiLib UI + C++ 实现，安装包体积仅 2MB+，无需额外依赖，内置 Analytics 支持，可追踪安装/卸载行为，采用类 HTML 的 XML 布局方式，易于定制，支持中英文等多语言切换。</p><p>下载安装包体验：<a href="https://github.com/sanonz/electron-invox/releases/download/v1.0.0/InvoxSetup-1.0.0.exe" target="_blank" rel="noopener">InvoxSetup-1.0.0.exe</a></p><a id="more"></a><h3 id="项目原理"><a href="#项目原理" class="headerlink" title="项目原理"></a>项目原理</h3><p>本安装程序采用模块化设计，各组件职责明确：</p><ul><li><strong>UI 层</strong>：基于 DuiLib 框架构建用户界面，构建快速安装和自定义安装、卸载界面</li><li><strong>逻辑层</strong>：C++ 实现完整的安装/卸载流程控制和错误处理机制</li><li><strong>资源打包</strong>：将目标应用程序打包为 <code>app.7z</code> 压缩包，嵌入安装程序资源中</li></ul><p><strong>安装流程</strong>：</p><ol><li>用户选择安装路径（快速安装使用默认路径，自定义安装可自由选择）</li><li>安装程序将内置的 <code>app.7z</code> 压缩包解压到目标目录</li><li>创建开始菜单和桌面快捷方式（可选）</li><li>写入注册表卸载信息</li><li>安装完成后可选择立即启动主程序（默认为 <code>InvoxApp.exe</code>，由 <code>APP_EXE_NAME</code> 宏定义）</li></ol><p><strong>技术特性</strong>：</p><ul><li>支持 7z 格式高压缩比，减小安装包体积</li><li>完整的回滚机制，安装失败或用户取消时自动清理</li><li>多语言支持，根据系统语言自动切换界面</li><li>安装过程实时进度反馈</li><li>磁盘空间和权限预检查，避免安装失败</li></ul><h3 id="界面预览"><a href="#界面预览" class="headerlink" title="界面预览"></a>界面预览</h3><table><thead><tr><th align="center">快速安装</th><th align="center">自定义安装</th><th align="center">卸载界面</th></tr></thead><tbody><tr><td align="center"><img src="/2025/beautifying-electron-installer-ui-with-invox-setup/quick@2x.png" title="快速安装"></td><td align="center"><img src="/2025/beautifying-electron-installer-ui-with-invox-setup/custom@2x.png" title="自定义安装"></td><td align="center"><img src="/2025/beautifying-electron-installer-ui-with-invox-setup/uninstall@2x.png" title="卸载界面"></td></tr></tbody></table><h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><h3 id="安装-Visual-Studio-2022-构建环境"><a href="#安装-Visual-Studio-2022-构建环境" class="headerlink" title="安装 Visual Studio 2022 构建环境"></a>安装 Visual Studio 2022 构建环境</h3><ol><li>下载安装工具：<a href="https://visualstudio.microsoft.com/zh-hans/thank-you-downloading-visual-studio/?sku=Community" target="_blank" rel="noopener">Visual Studio Community</a></li><li>选择勾选：<code>使用 C++ 的桌面开发</code>、<code>C++ ATL for latest v143 build tools (x86 &amp; x64)</code></li><li>执行下载安装</li></ol><h3 id="运行-Electron-示例模版"><a href="#运行-Electron-示例模版" class="headerlink" title="运行 Electron 示例模版"></a>运行 Electron 示例模版</h3><h4 id="下载源码"><a href="#下载源码" class="headerlink" title="下载源码"></a>下载源码</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> --recurse-submodules git@github.com:sanonz/electron-invox.git</span><br></pre></td></tr></table></figure><h4 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install</span><br></pre></td></tr></table></figure><h4 id="构建应用"><a href="#构建应用" class="headerlink" title="构建应用"></a>构建应用</h4><p>一行命令即可构建 Electron 和 Invox Setup</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For windows</span></span><br><span class="line">$ npm run build:invox</span><br></pre></td></tr></table></figure><p>运行 <code>dist/InvoxSetup-1.0.0.exe</code> 查看效果</p><h3 id="在已有-Electron-项目中添加"><a href="#在已有-Electron-项目中添加" class="headerlink" title="在已有 Electron 项目中添加"></a>在已有 Electron 项目中添加</h3><h4 id="添加-Invox-Setup-为子仓库"><a href="#添加-Invox-Setup-为子仓库" class="headerlink" title="添加 Invox Setup 为子仓库"></a>添加 Invox Setup 为子仓库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule add git@github.com:sanonz/invox-setup.git invox</span><br></pre></td></tr></table></figure><h4 id="导入构建脚本到项目"><a href="#导入构建脚本到项目" class="headerlink" title="导入构建脚本到项目"></a>导入构建脚本到项目</h4><p>下载 <a href="https://github.com/sanonz/electron-invox/blob/main/build-invox.bat" target="_blank" rel="noopener">build-invox.bat</a> 构建脚本，在 <code>package.json</code> 汇总添加构建命令</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"build"</span>: <span class="string">"electron-vite build"</span>,</span><br><span class="line">    <span class="attr">"build:unpack"</span>: <span class="string">"npm run build &amp;&amp; electron-builder --dir"</span>,</span><br><span class="line">    <span class="attr">"build:invox"</span>: <span class="string">"npm run build:unpack &amp;&amp; build-invox.bat"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="运行命令构建"><a href="#运行命令构建" class="headerlink" title="运行命令构建"></a>运行命令构建</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run build:invox</span><br></pre></td></tr></table></figure><h2 id="配置说明"><a href="#配置说明" class="headerlink" title="配置说明"></a>配置说明</h2><h3 id="配置-Config-h"><a href="#配置-Config-h" class="headerlink" title="配置 Config.h"></a>配置 Config.h</h3><p>编辑 <a href="https://github.com/sanonz/invox-setup/blob/setup/Common/Config.h" target="_blank" rel="noopener">Config.h</a> 中相关配置，改为自己的配置</p><h4 id="应用程序配置"><a href="#应用程序配置" class="headerlink" title="应用程序配置"></a>应用程序配置</h4><table><thead><tr><th>配置项</th><th>值</th><th>说明</th></tr></thead><tbody><tr><td><code>APP_NAME</code></td><td><code>InvoxApp</code></td><td>应用程序名称</td></tr><tr><td><code>APP_VERSION</code></td><td><code>1.0.0.0</code></td><td>完整版本号字符串</td></tr><tr><td><code>APP_PUBLISHER</code></td><td><code>YourCompany</code></td><td>发布者/公司名称</td></tr><tr><td><code>APP_EXE_NAME</code></td><td><code>InvoxApp.exe</code></td><td>主程序可执行文件名</td></tr><tr><td><code>APP_UNINSTALL_NAME</code></td><td><code>Uninstaller.exe</code></td><td>卸载程序文件名</td></tr></tbody></table><h4 id="版权信息"><a href="#版权信息" class="headerlink" title="版权信息"></a>版权信息</h4><ul><li><strong>APP_COPYRIGHT</strong>: <code>Copyright © 2025 YourCompany</code></li><li><strong>APP_DESCRIPTION</strong>: <code>InvoxApp Installer &amp; Uninstaller</code></li></ul><p>用于显示在安装程序界面和应用程序属性中</p><h4 id="网络端点"><a href="#网络端点" class="headerlink" title="网络端点"></a>网络端点</h4><ul><li><p><strong>PRIVACY_URL</strong>: <code>https://yourcompany.com/privacy.html</code></p><ul><li>隐私政策页面</li></ul></li><li><p><strong>ANALYTICS_ENDPOINT</strong>: <code>https://api.yourcompany.com/analytics</code></p><ul><li>数据分析上报接口</li><li>用于收集安装/使用统计信息</li></ul></li></ul><h3 id="压缩率配置"><a href="#压缩率配置" class="headerlink" title="压缩率配置"></a>压缩率配置</h3><p>这里的是指程序打包为 <code>app.7z</code> 的压缩率，选择不同压缩率会影响安装包大小</p><h4 id="压缩率列表"><a href="#压缩率列表" class="headerlink" title="压缩率列表"></a>压缩率列表</h4><table><thead><tr><th>目标</th><th>参数</th></tr></thead><tbody><tr><td><strong>极致压缩率（小体积优先）</strong></td><td><code>-t7z -m0=lzma2 -mx=9 -mfb=273 -md=64m -ms=on -mmt=on</code></td></tr><tr><td><strong>平衡速度与压缩率</strong></td><td><code>-t7z -m0=lzma2 -mx=7 -md=32m -mmt=on -ms=on</code></td></tr><tr><td><strong>快速压缩（打包分发）</strong></td><td><code>-t7z -mx=3 -mmt=on -ms=off</code></td></tr></tbody></table><h4 id="默认压缩率"><a href="#默认压缩率" class="headerlink" title="默认压缩率"></a>默认压缩率</h4><p>默认使用 <strong>平衡速度与压缩率</strong>，可在 <a href="https://github.com/sanonz/electron-invox/blob/main/build-invox.bat#L77" target="_blank" rel="noopener">build-invox.bat#L77</a> 中修改压缩率，压缩率越高占用 CPU、内存也越大</p><h3 id="UI-界面排版"><a href="#UI-界面排版" class="headerlink" title="UI 界面排版"></a>UI 界面排版</h3><p>可使用 <a href="https://github.com/xfcanyue/DuiLib_DuiEditor" target="_blank" rel="noopener">DuiEditor</a> 工具可视化排版，可查看 XML 结构，更改组件属性，不同属性的值可通过下拉选择修改，能很方便查看不同属性的类型及支持的值，改完实时预览最终展示效果，比古法手写 XML 要方便不少</p><img src="/2025/beautifying-electron-installer-ui-with-invox-setup/duilib-editor@2x.png" title="DuiEditor"><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol><li>安装完成不会打开应用，检查 <a href="https://github.com/sanonz/invox-setup/blob/setup/Common/Config.h#L17" target="_blank" rel="noopener">Config.h</a> 中的 <code>APP_EXE_NAME</code> 和 <code>app.7z</code> 中主程序一致</li><li>DuiLib 的颜色为 <code>0xAARRGGBB</code> (Alpha, Red, Green, Blue) 格式，背景支持 Alpha 透明，字体不支持</li><li>使用 DuiLib 中的 <code>Label</code> 组件点击内容时不会触发 <code>Notify</code> 事件，需改为 <code>Button</code> 或者 <code>Text</code> 组件</li></ol></section></article><div class="comments"><div id="comments"></div><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script>new Gitalk({clientID:"2f728eb14f7e549408f7",clientSecret:"90be74e913959dcf39fbfed54458bdd20f95ac30",repo:"sanonz.github.io",owner:"sanonz",admin:["sanonz"],id:"88c75b96dffcfceff5efefa0a13173c1",distractionFreeMode:!0,title:"使用 Invox Setup 实现 Electron 安装包界面美化",body:"https://sanonz.github.io/2025/beautifying-electron-installer-ui-with-invox-setup/",labels:["electron","c","c++"]}).render("comments")</script></div></div></div><a id="pagenext" href="/2024/debugging-support-for-arm-cortex-m-microcontrollers-on-vscode/" class="article-next" title="用 VS Code 编辑器开发 STM32 嵌入式"><i class="icon-arrow-right"></i></a><footer class="footer">Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme by <a href="https://github.com/sanonz/hexo-theme-concise" target="_blank">Concise</a><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?e4027971a230b210f4671f485b33846a";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></footer></main><script type="text/javascript" src="https://unpkg.com/jquery@1.9.1/jquery.min.js"></script><script type="text/javascript">$(function(){var n={nav:$("#nav"),aside:$("#aside"),asideInner:$("#aside-inner"),navInner:$("#nav-inner")},e=!1;function i(){"none"!==n.navInner.css("display")&&n.navInner.css("display","")}n.asideInner.on("webkitAnimationEnd mozAnimationEnd oAnimationEnd oanimationend animationend",function(){n.aside.hasClass("mobile-open")?n.aside.removeClass("mobile-open"):n.aside.removeClass("mobile-close panel-show"),e=!1}),$("#open-panel, #aside-mask").on("click",function(){e||(n.aside.hasClass("panel-show")?n.aside.addClass("mobile-close"):n.aside.addClass("mobile-open panel-show"))}),$("#open-menus").on("click",function(){n.navInner.slideToggle("normal",i)}),window.innerWidth<=960&&setTimeout(function(){n.navInner.slideUp("normal",i)},3e3),$(window).on("resize",function(){960<$(this).width()&&n.navInner.css("display","")})})</script><script src="/js/scrollspy.min.js"></script><script type="text/javascript">$(document.body).scrollspy({target:"#aside-inner"}),$(window).on("resize",function(){var e=$("#header").width(),t=$("#wrapper").width(),i=($(this).width()-e-t)/2/2,r=$("#pageprev"),d=$("#pagenext"),s=(r.width()+d.width())/2;if(s<i){var n=i-s/2,o={position:"fixed",top:"50%",marginTop:-(r.width()+d.width())/4};r.css($.extend({left:e+n},o)),d.css($.extend({right:n},o))}else r.removeAttr("style"),d.removeAttr("style")}).trigger("resize")</script></body></html>